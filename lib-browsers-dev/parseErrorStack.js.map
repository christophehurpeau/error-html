{"version":3,"sources":["../src/parseErrorStack.js"],"names":["err","frames","parse","files","Map","map","line","fileName","file","startsWith","has","get","set"],"mappings":";;;;;;AACA;;;;;;kBAEe,yBAACA,GAAD,EAAS;AACtB,MAAMC,SAAS,2BAAiBC,KAAjB,CAAuBF,GAAvB,CAAf;AACA,MAAMG,QAAQ,IAAIC,GAAJ,EAAd;;AAEA,SAAOH,OAAOI,GAAP,CAAW,UAACC,IAAD,EAAU;AAC1B,QAAMC,WAAWD,KAAKC,QAAtB;AACA,QAAIC,aAAJ;;AAEA,QAAID,YAAYA,SAASE,UAAT,CAAoB,GAApB,CAAhB,EAA0C;AACxC,UAAIN,MAAMO,GAAN,CAAUH,QAAV,CAAJ,EAAyB;AACvBC,eAAOL,MAAMQ,GAAN,CAAUJ,QAAV,CAAP;AACD,OAFD;AAGEJ,cAAMS,GAAN,CAAUL,QAAV,EAAoBC,OAAO,KAA3B;AAHF;AAeD;;AAEDF,SAAKE,IAAL,GAAYA,IAAZ;AACA,WAAOF,IAAP;AACD,GAxBM,CAAP;AAyBD,C","file":"parseErrorStack.js","sourcesContent":["import { readFileSync } from 'fs';\nimport errorStackParser from 'error-stack-parser';\n\nexport default (err) => {\n  const frames = errorStackParser.parse(err);\n  const files = new Map();\n\n  return frames.map((line) => {\n    const fileName = line.fileName;\n    let file;\n\n    if (fileName && fileName.startsWith('/')) {\n      if (files.has(fileName)) {\n        file = files.get(fileName);\n      } else if (BROWSER) {\n        files.set(fileName, file = false);\n      } else {\n        file = {};\n        try {\n          const fileContent = readFileSync(fileName).toString();\n          file.fileName = fileName;\n          file.contents = fileContent;\n          files.set(fileName, file);\n        } catch (e) {\n          files.set(fileName, file = false);\n        }\n      }\n    }\n\n    line.file = file;\n    return line;\n  });\n};\n"]}